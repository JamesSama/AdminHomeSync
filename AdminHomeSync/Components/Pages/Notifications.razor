@page "/notification"
@using AdminHomeSync.Components.Services
@inject NotificationService NotificationService

<PageTitle>Notifications</PageTitle>

<div class="notification-page">
    <div class="notif-container">
        <p class="header">Notifications</p>
        <div class="messages-container">
            @if (notifications == null || !notifications.Any())
            {
                <p>Loading...</p>
            }
            else
            {
                @foreach (var notification in notifications)
                {
                    <div class="messages-box">
                        <p class="message">@notification.Message</p>
                        <p class="daydate">@notification.FullDateTime</p>
                    </div>
                }
            }
        </div>
    </div>
</div>

@code {
    private List<NotificationService.NotificationItem>? notifications;
    private const string UserId = "XUeckjx6v3W7o35jqniz5USH3sy2"; // Replace with dynamic user ID if needed.

    protected override async Task OnInitializedAsync()
    {
        // Fetch and sort notifications when the page is initialized
        notifications = await NotificationService.GetNotificationsAsync(UserId);
    }
}
